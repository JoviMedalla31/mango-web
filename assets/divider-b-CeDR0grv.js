import{r as u,j as f,u as ge,L as F}from"./index-xd9kvKG7.js";import{g as ye,h as ve,V as xe,j as Ae,k as P,l as Se,M as oe,n as we,f as ae,o as ie,q as X,r as Me,s as De,t as Ee,i as ce,v as Ce,w as be,x as je,y as Ve,z as Re,A as Le,B as Te,C as Oe,S as Ie,D as ke,E as z,F as Ne,G as We,I as Ge,d as ue,K as Fe,m as le}from"./facebook-CkZ4HW50.js";const $e=(e,t,n)=>{const s=t-e;return((n-e)%s+s)%s+e};function fe(e,t){return ye(e)?e[$e(0,e.length,t)]:e}class Ke{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t){const n=this.animations.map(s=>s.attachTimeline(t));return()=>{n.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return Z(this.animations,"duration")}get iterationDuration(){return Z(this.animations,"iterationDuration")}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Z(e,t){let n=0;for(let s=0;s<e.length;s++){const o=e[s][t];o!==null&&o>n&&(n=o)}return n}class Be extends Ke{then(t,n){return this.finished.finally(t).then(()=>{})}}function Pe(...e){const t=!Array.isArray(e[0]),n=t?0:-1,s=e[0+n],o=e[1+n],r=e[2+n],a=e[3+n],c=ve(o,r,a);return t?c(s):c}function ze(e,t){return e in t}class Xe extends xe{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,n){if(ze(n,t)){const s=t[n];if(typeof s=="string"||typeof s=="number")return s}}getBaseTargetFromProps(){}removeValueFromRenderState(t,n){delete n.output[t]}measureInstanceViewportBox(){return Ae()}build(t,n){Object.assign(t.output,n)}renderInstance(t,{output:n}){Object.assign(t,n)}sortInstanceNodePosition(){return 0}}function _e(e){const t=P(()=>Se(e)),{isStatic:n}=u.useContext(oe);if(n){const[,s]=u.useState(e);u.useEffect(()=>t.on("change",s),[])}return t}function de(e,t){const n=_e(t()),s=()=>n.set(t());return s(),we(()=>{const o=()=>ae.preRender(s,!1,!0),r=e.map(a=>a.on("change",o));return()=>{r.forEach(a=>a()),ie(s)}}),n}function He(e){X.current=[],e();const t=de(X.current,e);return X.current=void 0,t}function me(e,t,n,s){if(typeof e=="function")return He(e);if(n!==void 0&&!Array.isArray(n)&&typeof t!="function")return Ue(e,t,n,s);const a=typeof t=="function"?t:Pe(t,n,s);return Array.isArray(e)?ee(e,a):ee([e],([c])=>a(c))}function ee(e,t){const n=P(()=>[]);return de(e,()=>{n.length=0;const s=e.length;for(let o=0;o<s;o++)n[o]=e[o].get();return t(n)})}function Ue(e,t,n,s){const o=P(()=>Object.keys(n)),r=P(()=>({}));for(const a of o)r[a]=me(e,t,n[a],s);return r}function Ye(e){const t=u.useRef(0),{isStatic:n}=u.useContext(oe);u.useEffect(()=>{if(n)return;const s=({timestamp:o,delta:r})=>{t.current||(t.current=o),e(o-t.current,r)};return ae.update(s,!0),()=>ie(s)},[e])}function _(e){return typeof e=="object"&&!Array.isArray(e)}function he(e,t,n,s){return typeof e=="string"&&_(t)?Me(e,n,s):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function qe(e,t,n){return e*(t+1)}function te(e,t,n,s){return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:t.startsWith("<")?Math.max(0,n+parseFloat(t.slice(1))):s.get(t)??e}function Je(e,t,n){for(let s=0;s<e.length;s++){const o=e[s];o.at>t&&o.at<n&&(Ee(e,o),s--)}}function Qe(e,t,n,s,o,r){Je(e,o,r);for(let a=0;a<t.length;a++)e.push({value:t[a],at:De(o,r,s[a]),easing:fe(n,a)})}function Ze(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function et(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const tt="easeInOut";function nt(e,{defaultTransition:t={},...n}={},s,o){const r=t.duration||.3,a=new Map,c=new Map,A={},h=new Map;let v=0,i=0,E=0;for(let M=0;M<e.length;M++){const l=e[M];if(typeof l=="string"){h.set(l,i);continue}else if(!Array.isArray(l)){h.set(l.name,te(i,l.at,v,h));continue}let[S,x,p={}]=l;p.at!==void 0&&(i=te(i,p.at,v,h));let g=0;const V=(w,D,C,L=0,T=0)=>{const y=st(w),{delay:I=0,times:m=Ce(y),type:d="keyframes",repeat:b,repeatType:k,repeatDelay:O=0,...$}=D;let{ease:R=t.ease||"easeOut",duration:j}=D;const H=typeof I=="function"?I(L,T):I,U=y.length,Y=Ve(d)?d:o?.[d||"keyframes"];if(U<=2&&Y){let N=100;if(U===2&&at(y)){const W=y[1]-y[0];N=Math.abs(W)}const K={...$};j!==void 0&&(K.duration=Re(j));const B=be(K,N,Y);R=B.ease,j=B.duration}j??(j=r);const q=i+H;m.length===1&&m[0]===0&&(m[1]=1);const J=m.length-y.length;if(J>0&&je(m,J),y.length===1&&y.unshift(null),b){j=qe(j,b);const N=[...y],K=[...m];R=Array.isArray(R)?[...R]:[R];const B=[...R];for(let W=0;W<b;W++){y.push(...N);for(let G=0;G<N.length;G++)m.push(K[G]+(W+1)),R.push(G===0?"linear":fe(B,G-1))}Ze(m,b)}const Q=q+j;Qe(C,y,R,m,q,Q),g=Math.max(H+j,g),E=Math.max(Q,E)};if(ce(S)){const w=ne(S,c);V(x,p,se("default",w))}else{const w=he(S,x,s,A),D=w.length;for(let C=0;C<D;C++){x=x,p=p;const L=w[C],T=ne(L,c);for(const y in x)V(x[y],rt(p,y),se(y,T),C,D)}}v=i,i+=g}return c.forEach((M,l)=>{for(const S in M){const x=M[S];x.sort(et);const p=[],g=[],V=[];for(let D=0;D<x.length;D++){const{at:C,value:L,easing:T}=x[D];p.push(L),g.push(Le(0,E,C)),V.push(T||"easeOut")}g[0]!==0&&(g.unshift(0),p.unshift(p[0]),V.unshift(tt)),g[g.length-1]!==1&&(g.push(1),p.push(null)),a.has(l)||a.set(l,{keyframes:{},transition:{}});const w=a.get(l);w.keyframes[S]=p,w.transition[S]={...t,duration:E,ease:V,times:g,...n}}}),a}function ne(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function se(e,t){return t[e]||(t[e]=[]),t[e]}function st(e){return Array.isArray(e)?e:[e]}function rt(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const ot=e=>typeof e=="number",at=e=>e.every(ot);function it(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=Te(e)&&!Oe(e)?new Ie(t):new ke(t);n.mount(e),z.set(e,n)}function ct(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new Xe(t);n.mount(e),z.set(e,n)}function ut(e,t){return ce(e)||typeof e=="number"||typeof e=="string"&&!_(t)}function pe(e,t,n,s){const o=[];if(ut(e,t))o.push(Ne(e,_(t)&&t.default||t,n&&(n.default||n)));else{const r=he(e,t,s),a=r.length;for(let c=0;c<a;c++){const A=r[c],h=A instanceof Element?it:ct;z.has(A)||h(A);const v=z.get(A),i={...n};"delay"in i&&typeof i.delay=="function"&&(i.delay=i.delay(c,a)),o.push(...We(v,{...t,transition:i},{}))}}return o}function lt(e,t,n){const s=[];return nt(e,t,n,{spring:Ge}).forEach(({keyframes:r,transition:a},c)=>{s.push(...pe(c,r,a))}),s}function ft(e){return Array.isArray(e)&&e.some(Array.isArray)}function dt(e){function t(n,s,o){let r=[],a;if(ft(n))r=lt(n,s,e);else{const{onComplete:A,...h}=o||{};typeof A=="function"&&(a=A),r=pe(n,s,h,e)}const c=new Be(r);return a&&c.finished.then(a),c}return t}const mt=dt();function ht(e,t){return(e%t+t)%t}function pt(e,t,n){return ht(e-n,t)+n}function gt(e,t,n){return Math.max(Math.min(e,t),n)}const yt=()=>{const[e,t]=u.useState(!1);return{refreshed:e,rerender:()=>{t(s=>!s)}}},re={SM:50,LG:25},vt=({children:e,index:t,x:n,itemsRef:s,onRefsAssigned:o,itemCount:r,dimensions:a})=>{const{isSm:c,isMd:A}=ue(),h=me(n,v=>{const i=a.full.current*r.current,E=-((t+1)*a.full.current),M=a.gap.current/2,l=a.item.current/2,S=a.item.current/2;return v+=c?M:A?l:S,v=pt(v,i,E),`${v}dvw`});return f.jsx(le.div,{initial:{x:h.get()},style:{minWidth:`${a.full.current}dvw`,width:`${a.full.current}dvw`,paddingRight:`${a.gap.current}dvw`,x:h},ref:v=>{s.current[t]=v,o()},children:f.jsx("div",{className:`border-faded-mango-100 flex aspect-3/4 w-full cursor-pointer
          items-center justify-center rounded-[4rem] border-5 px-2 py-4`,children:f.jsx("div",{className:"select-none",children:e})})})},xt=({ref:e,items:t,onMouseDown:n})=>{const s=[...t,...t],{refreshed:o,rerender:r}=yt(),{isSm:a,isMd:c}=ue(),A=u.useRef(s.length),h=u.useRef([]),v=u.useRef(0),i=u.useRef(25),E=u.useRef(2),M=u.useRef(i.current-E.current),l=u.useRef(new Fe(0)),S=u.useRef(null),x=u.useRef(0),p=u.useRef(null),g=u.useRef(i.current/2),V=u.useRef(!1),w=u.useRef(!1);u.useLayoutEffect(()=>{c?i.current=re.SM:i.current=re.LG,S.current?.stop(),M.current=i.current-E.current,l.current.set(x.current*i.current),r()},[a,c]),u.useLayoutEffect(()=>{const m=()=>{v.current=window.innerWidth},d=new ResizeObserver(()=>{m()});return m(),h.current[0]&&d.observe(h.current[0]),()=>d.disconnect()},[h.current[0],o]),u.useLayoutEffect(()=>{const m=()=>{const b=x.current*i.current;V.current=!0,g.current=0,l.current.set(b)},d=new ResizeObserver(()=>{m()});return m(),h.current[0]&&d.observe(h.current[0]),()=>d.disconnect()},[h.current]),Ye((m,d)=>{if(a||w.current)return;const k=d/1e3*2,O=l.current.get()-k;g.current+=k,l.current.set(O),g.current>=i.current&&(x.current-=1,g.current-=i.current)});const D=()=>{g.current=i.current/2,p.current=l.current.get()},C=(m,d)=>{const k=d.offset.x/v.current*100;let O=Math.round(k/i.current),$;O==0&&Math.abs(d.velocity.x)>500&&(O=d.velocity.x>0?1:-1),x.current+=O,p.current=null,$=x.current*i.current,l.current.stop(),S.current=mt(l.current,$,{type:"spring",velocity:gt(d.velocity.x,100,-100),duration:1.2})},L=(m,d)=>{if(p.current==null){S.current?.stop();return}const b=d.offset.x/v.current*100;l.current.set((p.current??l.current.get())+b)},T=()=>{w.current=!0},y=()=>{w.current=!1},I=()=>{r()};return f.jsx("div",{ref:e,onMouseDown:n,onMouseEnter:T,onMouseLeave:y,className:"max-w-full overflow-x-hidden",children:f.jsx(le.div,{drag:"x",dragConstraints:{left:0,right:0},style:{width:`${s.length*i.current}dvw`},dragElastic:0,dragMomentum:!1,onDrag:L,onDragStart:D,onDragEnd:C,className:"flex",children:s.map((m,d)=>f.jsx(vt,{index:d,x:l.current,itemsRef:h,onRefsAssigned:I,itemCount:A,dimensions:{full:i,gap:E,item:M},children:m},d))})})},At="/mango-web/images/products/shots/chocolate.png",St="/mango-web/images/products/shots/slice.png",wt="/mango-web/images/products/shots/spaghetti.png",Mt="/mango-web/images/products/shots/strip.png",Dt="/mango-web/images/products/shots/chocolate-slices.png",bt=({ref:e})=>{const t=ge(),n=u.useRef(null),s=r=>{n.current=[r.screenX,r.screenY]},o=r=>a=>{const c=[Math.abs((n.current?.[0]??0)-a.screenX),Math.abs((n.current?.[1]??0)-a.screenY)];n.current=null,!(c[0]>10||c[1]>10)&&(t(`/products/${r}`),console.log("item clicked"))};return f.jsx(xt,{ref:e,onMouseDown:s,items:[f.jsx(F,{to:"/products/slices",onMouseDownCapture:r=>r.preventDefault(),onClick:r=>r.preventDefault(),children:f.jsx("div",{onClick:o("slices"),children:f.jsx("img",{src:St,className:"pointer-events-none select-none"})})}),f.jsx(F,{to:"/products/strips",onMouseDownCapture:r=>r.preventDefault(),onClick:r=>r.preventDefault(),children:f.jsx("div",{onClick:o("strips"),children:f.jsx("img",{src:Mt,className:"pointer-events-none select-none"})})}),f.jsx(F,{to:"/products/spaghetti",onMouseDownCapture:r=>r.preventDefault(),onClick:r=>r.preventDefault(),children:f.jsx("div",{onClick:o("spaghetti"),children:f.jsx("img",{src:wt,className:"pointer-events-none select-none"})})}),f.jsx(F,{to:"/products/chocolate-strips",onMouseDownCapture:r=>r.preventDefault(),onClick:r=>r.preventDefault(),children:f.jsx("div",{onClick:o("chocolate-strips"),children:f.jsx("img",{src:At,className:"pointer-events-none select-none"})})}),f.jsx(F,{to:"/products/chocolate-slices",onMouseDownCapture:r=>r.preventDefault(),onClick:r=>r.preventDefault(),children:f.jsx("div",{onClick:o("chocolate-slices"),children:f.jsx("img",{src:Dt,className:"pointer-events-none select-none"})})})]})},jt="/mango-web/images/divider-b.svg";export{bt as P,_e as a,St as b,wt as c,jt as d,Mt as e,Dt as f,gt as g,At as i,me as u};
